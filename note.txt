[ Frontend (React + Tailwind + ShadCN + Redux Toolkit) ]

         â†“  Axios (interceptors, requÃªtes HTTPS)

[ Backend (Node + Express + Middlewares + Auth + Stripe) ]

         â†“  Mongoose (ODM)

[ Database (MongoDB - Atlas / Compass) ]




MVC : 
[ Front ] : requÃªte HTTP (GET, POST, PUT, PATCH, DELETE..)
        â†“ 
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[ Routes ] : dÃ©finit lâ€™URL + choisit le contrÃ´leur
        â†“
[ Controller ] : Contient la logique mÃ©tier
        â†“
[ Model ] : GÃ¨re les donnÃ©es (BDD via Mongoose)
        â†“
RÃ©ponse HTTP (JSON)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[ Front ] : Affiche la rÃ©ponse (UI)



Express (req / res / next()) :
[ Utilisateur ]
        â†“  
      req = requÃªte HTTP = infos envoyÃ©es (body, params, query, headersâ€¦)
        â†“
[ Middleware / ContrÃ´leur Express (req, res, next) ]
        â†“
      next() â†’ Passe au middleware / contrÃ´leur suivant
        â†“
      res = rÃ©ponse HTTP (status, JSON, texteâ€¦)
        â†“
[ Utilisateur ]




JWT : 
[ Utilisateur ]
     â†“ (login : email + mot de passe)
[ Serveur Auth (Node / Express) ]
     â†“
VÃ©rifie le user en BDD (bcrypt.compare)
     â†“
CrÃ©e un JWT signÃ© (id, email, rÃ´le...) + expiresIn
     â†“
Renvoie le token au front
--------------------------------------------
[ Front (React) ]
     â†“
Stocke le token (ex: localStorage ou cookies)
     â†“
Envoie le token dans chaque requÃªte (headers: Authorization: Bearer <token>)
--------------------------------------------
[ Serveur API protÃ©gÃ©e ]
     â†“
ğŸ” VÃ©rifie le token avec jwt.verify()
     â†“
âœ… Si valide â†’ autorise la requÃªte
âŒ Si expirÃ© / invalide â†’ renvoie 401 (Unauthorized)





Stripe :
[ Front ]
   â”‚  POST /pay { order, items }
   â–¼
[ Back ]
   â”‚  â†’ CrÃ©e une Checkout Session Stripe (infos paiement + success_url + cancel_url)
   â”‚  â†’ ReÃ§oit session.url et le renvoie au Front
   â–¼
[ Front ]
   â”‚  â†’ Redirige lâ€™utilisateur vers session.url
   â–¼
[ Stripe Checkout ]
   â”‚  â†’ Affiche la page â†’ lâ€™utilisateur paie ou annule
   â–¼
[ Stripe renvoie automatiquement vers ]
   â”œâ”€ âœ… success_url  (paiement rÃ©ussi)
   â””â”€ âŒ cancel_url   (paiement annulÃ©)



   
XSS (Cross-Site Scripting) :
1. Sans xss-clean
[ Client malveillant ] â†’ envoie du code JS cachÃ© dans un champ (formulaire, commentaire, etc.)
     â†“
[ Serveur ] â†’ enregistre ce code sans le filtrer
     â†“
[ Autre utilisateur ] â†’ âš ï¸ charge la page â†’ le code JS sâ€™exÃ©cute dans son navigateur !
     â†“
RÃ©sultat : Le pirate peut voler des cookies, des tokens JWT, ou rediriger lâ€™utilisateur vers un faux site.

2. Avec xss-clean
[ Client ] â†’ formulaire : "comment": "<script>hack()</script>"
        â†“
[ Serveur ] â†’ reÃ§oit la requÃªte
        â†“
xss-clean intercepte et nettoie : "<script>" â†’ "&lt;script&gt;"
        â†“
[ Serveur ] â†’ enregistre ou renvoie les donnÃ©es propres
        â†“
[ Navigateur ] â†’ nâ€™exÃ©cute pas de script malveillant



Helmet : 
[ RequÃªte navigateur ]
        â†“
[ Express + Helmet ] â†’ Helmet ajoute des headers de sÃ©curitÃ© dans les rÃ©ponses HTTP par ex :
        â†“
    X-Frame-Options: SAMEORIGIN
    X-Content-Type-Options: nosniff
    Strict-Transport-Security: max-age=15552000 ...
        â†“
[ Navigateur ] â†’ lit et applique ces rÃ¨gles de sÃ©curitÃ©



express-mongo-sanitize :
[ RequÃªte du client ] â†’ injecte des opÃ©rateurs MongoDB ($, .) pour manipuler/contourner les requÃªtes de bdd
     â†“
  { "$gt": "", "user": "admin" }
     â†“
[ express-mongo-sanitize ] â†’ supprime/neutralise les clÃ©s contenant '$' ou '.' dans req.body / query / params
     â†“
  { "user": "admin" }
     â†“
[ RequÃªte MongoDB sÃ©curisÃ©e ]
